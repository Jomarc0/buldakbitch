<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>Coffee Menu with Category Tabs and Add Item Functionality</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <style>
   body { font-family: 'Inter', sans-serif; }
   #menu-scroll::-webkit-scrollbar { width: 6px; }
   #menu-scroll::-webkit-scrollbar-thumb { background-color: #c4b09a; border-radius: 10px; }
   .add-btn:hover { background-color: #a08b6a; }
   .qty-btn:hover { background-color: #d1c4a7; }
   .confirm-btn:hover { background-color: #4caf50; }
   .cancel-btn:hover { background-color: #f44336; }
  </style>
</head>
<body class="bg-[rgba(255,255,255,0.7)] min-h-screen flex">
<!-- Sidebar -->
  <aside class="bg-white bg-opacity-90 backdrop-blur-sm w-16 flex flex-col items-center py-6 space-y-8 shadow-lg">
   <button aria-label="Home" class="text-[#4B2E0E] text-xl" title="Home" type="button" onclick="window.location='mainpage.php'"><i class="fas fa-home"></i></button>
   <button aria-label="Cart" class="text-[#4B2E0E] text-xl" title="Cart" type="button" onclick="window.location='page.php'"><i class="fas fa-shopping-cart"></i></button>
   <!-- Updated link to tranlist.php (now in ../all/) -->
   <button aria-label="Order List" class="text-[#4B2E0E] text-xl" title="Order List" type="button" onclick="window.location='../all/tranlist.php'"><i class="fas fa-list"></i></button>
   <button aria-label="Box" class="text-[#4B2E0E] text-xl" title="Box" type="button" onclick="window.location='product.php'"><i class="fas fa-box"></i></button>
   <button aria-label="Users" class="text-[#4B2E0E] text-xl" title="Users" type="button" onclick="window.location='user.php'"><i class="fas fa-users"></i></button>
   <button aria-label="Settings" class="text-[#4B2E0E] text-xl" title="Settings" type="button" onclick="window.location='../all/setting.php'"><i class="fas fa-cog"></i></button>
   <button id="logout-btn" aria-label="Logout" name="logout" class="text-[#4B2E0E] text-xl" title="Logout" type="button"><i class="fas fa-sign-out-alt"></i></button>
  </aside>
  <!-- Main content -->
  <main class="flex-1 p-6 relative flex flex-col">
   <img alt="Background image of coffee beans" aria-hidden="true" class="absolute inset-0 w-full h-full object-cover opacity-20 -z-10" height="800" src="https://storage.googleapis.com/a1aa/image/22cccae8-cc1a-4fb3-7955-287078a4f8d4.jpg" width="1200"/>
   <header class="mb-4">
    <p class="text-xs text-gray-400 mb-0.5">Welcome to Buldaks</p>
    <h1 class="text-[#4B2E0E] font-semibold text-xl mb-3">Homepage</h1>
   </header>

   <!-- Category buttons -->
   <nav aria-label="Coffee categories" id="category-nav"
  class="flex gap-3 mb-3 overflow-x-auto whitespace-nowrap scrollbar-thin scrollbar-thumb-[#c4b09a] scrollbar-track-transparent px-1">
    <button class="flex items-center gap-2 bg-[#4B2E0E] text-white shadow-md rounded-full py-2 px-5 text-sm font-semibold category-btn active" data-category="all">
      <i class="fas fa-grip-horizontal"></i> All
    </button>
    <button class="flex items-center gap-2 bg-white border border-gray-300 text-gray-700 rounded-full py-2 px-5 text-sm font-semibold category-btn" data-category="signatures">
      <i class="fas fa-coffee"></i> Signatures
    </button>
    <button class="flex items-center gap-2 bg-white border border-gray-300 text-gray-700 rounded-full py-2 px-5 text-sm font-semibold category-btn" data-category="add-ons">
      <i class="fas fa-plus"></i> Add ons
    </button>
    <button class="flex items-center gap-2 bg-white border border-gray-300 text-gray-700 rounded-full py-2 px-5 text-sm font-semibold category-btn" data-category="drinks">
      <i class="fas fa-glass-whiskey"></i> Drinks
    </button>
  </nav>
   <!-- Buldak Menu Grid -->
   <section aria-label="Coffee menu" class="bg-white bg-opacity-90 backdrop-blur-sm rounded-xl p-4 max-h-[600px] overflow-y-auto shadow-lg flex-1" id="menu-scroll">
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4" id="menu-items">
      <!-- Cheesy Buldak (Signatures) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="signatures" data-id="cheesy-buldak" data-name="Cheesy Buldak" data-price="109">
        <img src="https://placehold.co/80x80/png?text=Cheesy+Buldak" alt="Cheesy Buldak" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Cheesy Buldak</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 109.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="cheesy-buldak" data-name="Cheesy Buldak" data-price="109">Add Item</button>
        </div>
      </article>
      <!-- Cheesy Buldak Overload (Signatures) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="signatures" data-id="cheesy-buldak-overload" data-name="Cheesy Buldak Overload" data-price="129">
        <img src="https://placehold.co/80x80/png?text=Cheesy+Buldak+Overload" alt="Cheesy Buldak Overload" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Cheesy Buldak Overload</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 129.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="cheesy-buldak-overload" data-name="Cheesy Buldak Overload" data-price="129">Add Item</button>
        </div>
      </article>
      <!-- Carbonara Buldak (Signatures) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center
        menu-item" data-category="signatures" data-id="carbonara-buldak" data-name="Carbonara Buldak" data-price="119">
          <img src="https://placehold.co/80x80/png?text=Carbonara+Buldak" alt="Carbonara Buldak" class="mb-2" width="80" height="80">
          <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Carbonara Buldak</h3>
          <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 119.00</p>
          <div class="item-controls w-full">
            <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="carbonara-buldak" data-name="Carbonara Buldak" data-price="119">Add Item</button>
          </div>
      </article>
      <!-- Spam (Add ons) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="add-ons" data-id="Spam" data-name="Spam" data-price="20">
        <img src="https://placehold.co/80x80/png?text=Spam" alt="Spam" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Spam</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 20.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Spam" data-name="Spam" data-price="20">Add Item</button>
        </div>
      </article>
      <!-- Egg (Add ons) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="add-ons" data-id="Egg" data-name="Egg" data-price="15">
        <img src="https://placehold.co/80x80/png?text=Egg" alt="Egg" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Egg</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 15.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Egg" data-name="Egg" data-price="15">Add Item</button>
        </div>
      </article>
      <!-- Seaweeds (Add ons) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="add-ons" data-id="Seaweeds" data-name="Seaweeds" data-price="20">
        <img src="https://placehold.co/80x80/png?text=SeaWeeds" alt="SeaWeeds" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">SeaWeeds</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 20.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Seaweeds" data-name="Seaweeds" data-price="20">Add Item</button>
        </div>
      </article>
      <!-- Water (Drinks) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="drinks" data-id="Water" data-name="Water" data-price="10">
        <img src="https://placehold.co/80x80/png?text=Water" alt="Water" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Water</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 10.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Water" data-name="Water" data-price="10">Add Item</button>
        </div>
      </article>
      <!-- Coke (Drinks) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="drinks" data-id="Coke" data-name="Coke" data-price="20">
        <img src="https://placehold.co/80x80/png?text=Coke" alt="Coke" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Coke</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 20.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Water" data-name="Water" data-price="10">Add Item</button>
        </div>
      </article>
      <!-- Royal (Drinks) -->
      <article class="bg-white rounded-lg shadow-md p-3 flex flex-col items-center menu-item" data-category="drinks" data-id="Royal" data-name="Royal" data-price="20">
        <img src="https://placehold.co/80x80/png?text=Royal" alt="Royal" class="mb-2" width="80" height="80">
        <h3 class="font-semibold text-sm text-[#4B2E0E] mb-1 text-center">Water</h3>
        <p class="font-semibold text-xs text-[#4B2E0E] mb-2">₱ 20.00</p>
        <div class="item-controls w-full">
          <button class="bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn" data-id="Water" data-name="Water" data-price="10">Add Item</button>
        </div>
      </article>
    </div>
   </section>
  </main>
  
  <!-- Order summary -->
  <aside aria-label="Order summary" class="w-80 bg-white bg-opacity-90 backdrop-blur-sm rounded-xl shadow-lg flex flex-col justify-between p-4">
   <div>
    <h2 class="font-semibold text-[#4B2E0E] mb-2">Guest's Order:</h2>
    <div class="text-xs text-gray-700" id="order-list">
    </div>
   </div>
   <div class="mt-6 text-center">
    <p class="font-semibold mb-1">Total:</p>
    <p class="text-4xl font-extrabold text-[#4B2E0E] flex justify-center items-center gap-1" id="order-total"><span>₱</span> 0.00</p>
   </div>
   <div class="mt-6 flex gap-4">
    <button class="flex-1 bg-green-500 text-white rounded-lg py-2 font-semibold confirm-btn" id="confirm-btn" disabled>Confirm</button>
    <button class="flex-1 bg-red-500 text-white rounded-lg py-2 font-semibold cancel-btn" id="cancel-btn" disabled>Cancel</button>
   </div>
  </aside>

  <script>
    let order = {};
    const orderList = document.getElementById("order-list");
    const orderTotalEl = document.getElementById("order-total");
    const confirmBtn = document.getElementById("confirm-btn");
    const cancelBtn = document.getElementById("cancel-btn");
    // Change initial category to 'all'
    let currentCategory = 'all'; 

    // Function to render quantity controls
    function renderControls(article, id, name, price, quantity) {
      const controlsDiv = article.querySelector('.item-controls');
      controlsDiv.innerHTML = '';
      
      if (quantity > 0) {
        // Show - quantity + in a full-width flex container
        controlsDiv.className = 'item-controls w-full flex items-center justify-center gap-2';
        
        const minusBtn = document.createElement('button');
        minusBtn.className = 'bg-gray-300 rounded-full w-7 h-7 text-gray-600 qty-btn';
        minusBtn.textContent = '-';
        minusBtn.addEventListener('click', () => updateQuantity(id, name, price, quantity - 1, article));
        
        const qtySpan = document.createElement('span');
        qtySpan.className = 'text-sm font-semibold text-[#4B2E0E]';
        qtySpan.textContent = quantity;
        
        const plusBtn = document.createElement('button');
        plusBtn.className = 'bg-[#C4A07A] rounded-full w-7 h-7 text-white font-bold qty-btn';
        plusBtn.textContent = '+';
        plusBtn.addEventListener('click', () => updateQuantity(id, name, price, quantity + 1, article));
        
        controlsDiv.appendChild(minusBtn);
        controlsDiv.appendChild(qtySpan);
        controlsDiv.appendChild(plusBtn);
      } else {
        // Show Add Item button
        controlsDiv.className = 'item-controls w-full';
        const addBtn = document.createElement('button');
        addBtn.className = 'bg-[#C4A07A] rounded-full w-full py-1 text-xs font-semibold text-white add-btn';
        addBtn.textContent = 'Add Item';
        addBtn.setAttribute('data-id', id); // Re-add data attributes for consistency
        addBtn.setAttribute('data-name', name);
        addBtn.setAttribute('data-price', price);
        addBtn.addEventListener('click', () => updateQuantity(id, name, price, 1, article));
        controlsDiv.appendChild(addBtn);
      }
    }

    // Update quantity and re-render
    function updateQuantity(id, name, price, newQty, article) {
      if (newQty <= 0) {
        delete order[id];
      } else {
        order[id] = { name, price, quantity: newQty };
      }
      renderControls(article, id, name, price, newQty > 0 ? newQty : 0);
      renderOrder();
    }

    // Filter menu items by category
    function filterMenu(category) {
      document.querySelectorAll('.menu-item').forEach(item => {
        if (category === 'all') { // If 'all' category is selected, show all items
          item.classList.remove('hidden');
        } else if (item.getAttribute('data-category') === category) {
          item.classList.remove('hidden');
        } else {
          item.classList.add('hidden');
        }
      });
    }

    // Category button event listeners
    document.querySelectorAll('.category-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const category = btn.getAttribute('data-category');
        currentCategory = category;
        // Remove active classes from all buttons
        document.querySelectorAll('.category-btn').forEach(b => {
          b.classList.remove('active', 'bg-[#4B2E0E]', 'text-white', 'shadow-md');
          b.classList.add('bg-white', 'border', 'border-gray-300', 'text-gray-700');
        });
        // Add active classes to the clicked button
        btn.classList.add('active', 'bg-[#4B2E0E]', 'text-white', 'shadow-md');
        btn.classList.remove('bg-white', 'border', 'border-gray-300', 'text-gray-700');
        filterMenu(category);
      });
    });

    // Initial setup for controls - attach click listener to existing add buttons
    document.querySelectorAll('.add-btn').forEach(btn => {
      const article = btn.closest('article');
      const id = btn.getAttribute('data-id');
      const name = btn.getAttribute('data-name');
      const price = parseFloat(btn.getAttribute('data-price'));
      btn.addEventListener('click', () => updateQuantity(id, name, price, 1, article));
    });

    // Cancel button clears the order and reverts menu items
    cancelBtn.addEventListener('click', () => {
      order = {}; // Clear the entire order
      
      // Iterate over ALL menu items (articles) to reset their controls
      document.querySelectorAll('article.menu-item').forEach(article => {
        const id = article.getAttribute('data-id');
        const name = article.getAttribute('data-name');
        const price = parseFloat(article.getAttribute('data-price'));
        
        // Ensure valid data exists before attempting to render controls
        if (id && name && !isNaN(price)) {
          renderControls(article, id, name, price, 0); // Call renderControls with quantity 0
        }
      });
      renderOrder(); // Update the order summary display
    });

    // Confirm button (placeholder)
    confirmBtn.addEventListener('click', () => {
      alert('Order confirmed! Total: ' + orderTotalEl.textContent);
      // You might want to clear the order and reset menu items after confirming too
      // order = {};
      // document.querySelectorAll('article.menu-item').forEach(article => {
      //   const id = article.getAttribute('data-id');
      //   const name = article.getAttribute('data-name');
      //   const price = parseFloat(article.getAttribute('data-price'));
      //   if (id && name && !isNaN(price)) {
      //     renderControls(article, id, name, price, 0);
      //   }
      // });
      // renderOrder();
    });

    function renderOrder() {
      orderList.innerHTML = '<p class="font-semibold mb-1">CATEGORY</p>';
      const entries = Object.values(order);
      if (entries.length === 0) {
        orderTotalEl.textContent = "₱ 0.00";
        confirmBtn.disabled = true;
        cancelBtn.disabled = true;
        return;
      }
      let total = 0;
      entries.forEach(item => {
        const subtotal = item.price * item.quantity;
        total += subtotal;
        const div = document.createElement("div");
        div.className = "flex justify-between mb-1";
        const spanName = document.createElement("span");
        spanName.className = "font-semibold";
        spanName.textContent = item.name;
        const spanPriceQty = document.createElement("span");
        spanPriceQty.innerHTML = `<span class="font-semibold">₱ ${subtotal.toFixed(2)}</span><span class="ml-1">x${item.quantity}</span>`;
        div.appendChild(spanName);
        div.appendChild(spanPriceQty);
        orderList.appendChild(div);
      });
      orderTotalEl.innerHTML = `<span>₱</span> ${total.toFixed(2)}`;
      confirmBtn.disabled = false;
      cancelBtn.disabled = false;
    }

    // Initial filter when the page loads
    // Find the 'All' button and simulate a click to set its active state and filter
    const allButton = document.querySelector('.category-btn[data-category="all"]');
    if (allButton) {
      allButton.click();
    } else {
      // Fallback if 'All' button isn't found, filter by the default currentCategory
      filterMenu(currentCategory); 
    }
  </script>
</body>
</html>